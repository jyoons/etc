<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="resource/css/common.css">
  <script src="resource/js/jquery-3.7.1.min.js"></script>
  <script src="resource/js/ui-common.js"></script>
	<link rel="stylesheet" type="text/css" href="resource/devEx/css/dx.light.css"/>   
  <script type="text/javascript" src="resource/devEx/js/dx.all.js"></script>
</head>
<body>
  <div class="wrapper">
    <!-- header -->
    <header class="header">
      <div class="header-wrap">
        <div class="logo"><img src="resource/images/logo.png" alt="AICC 2.0"></div>
        <div class="info-area">
            <div><img src="resource/images/header-info-01.png" alt=""></div>
						<div><img src="resource/images/header-info-02.png" alt=""></div>
        </div>
      </div>
			<div class="nav-wrap">
					<button type="button" class="btn nav-btn"><img src="resource/images/icon-menu.png" alt="메뉴"></button>
					<div class="nav-tabList-wrap">
						<div class="nav-tab-controller">
							<button type="button" class="btn nav-btn-prev"><img src="resource/images/icon-arrow-left.png" alt="이전"></button>
							<button type="button" class="btn nav-btn-next"><img src="resource/images/icon-arrow-right.png" alt="다음"></button>
							<button type="button" class="btn nav-btn-more"><img src="resource/images/icon-more.png" alt="더보기"></button>
						</div>
						<ul class="nav-tabList">
							<li class="active"><a href="javascript:void(0);" class="tab-nav-link">콜</a></li>
							<li><a href="javascript:void(0);" class="tab-nav-link">채팅</a></li>
							<li><a href="javascript:void(0);" class="tab-nav-link">상담통계</a></li>
							<li><a href="javascript:void(0);" class="tab-nav-link">업무이관리스트</a></li>
						</ul>
					</div>
			</div>
    </header>
    <!--// header --> 
    <div class="container">
      <div class="contents">
				<div class="contents-wrap">
					<div class="conts-area-wrap">
						<div class="conts-area conts-box-wrap">
							<!-- 상담사 상태 -->
							<div class="conts-box">
								<div class="conTit">상담사 상태</div>
								<div class="conts-box-inner chart-wrap">
									<div class="donutChart-box">
										<div id="donutChart1" class="chart-area"></div>
										<div class="center-text">
												<span class="label">로그인</span>
												<strong class="value counter" data-target-num="230">0</strong>
										</div>
									</div>
								</div>
							</div>
							<!--// 상담사 상태 -->
							<!-- 큐현황 -->
							<div class="conts-box">
								<div class="conTit">큐현황</div>
								<div class="conts-box-inner">
									<div class="data-list-wrap">
										<ul class="data-list-cards">
											<li class="data-list-card">
												<div class="dataTit">총인입호</div>
												<div class="conts counter" data-target-num="1415">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">실인입호</div>
												<div class="conts counter" data-target-num="21">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">분배호</div>
												<div class="conts counter"  data-target-num="65">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">포기호</div>
												<div class="conts counter" data-target-num="0">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">넌서비스호</div>
												<div class="conts counter" data-target-num="0">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">콜백</div>
												<div class="conts counter" data-target-num="21">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">큐전환</div>
												<div class="conts counter" data-target-num="0">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">실패호</div>
												<div class="conts counter" data-target-num="1">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">그룹호전환</div>
												<div class="conts counter" data-target-num="0">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">타센터 라우팅</div>
												<div class="conts counter" data-target-num="9">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">타센터 라우팅 실패</div>
												<div class="conts counter" data-target-num="21">0</div>
											</li>
											<li class="data-list-card">
												<div class="dataTit">타센터 인입</div>
												<div class="conts counter" data-target-num="7">0</div>
											</li>
										</ul>
									</div>
								</div>
							</div>
							<!--// 큐현황 -->
						</div>
						<!-- 서비스 현황 -->
						<div class="conts-area">
							<div class="conts-box">
								<div class="conTit">서비스 현황</div>
								<div class="conts-box-inner chart-wrap">
									<div class="lineChart-box">
										<div id="lineChart1" class="chart"></div>
									</div>
								</div>
							</div>
						</div>
						<!--// 서비스 현황 -->
						<!-- 대기호 -->
						<div class="conts-area">
							<div class="conts-box">
								<div class="conTit-wrap">
									<div class="conTit">대기호</div>
									<div class="btn-wrap">
										<button type="button" class="btn"><img src="resource/images/icon-setting.png"></button>
										<button type="button" class="btn"><img src="resource/images/icon-expand.png"></button>
									</div>
								</div>
								<div class="conts-box-inner">
									<div class="chart-area-multi">
										<div class="select-field">
											<select id="chartFilterSelect" class="select">
												<option value="all">전체</option>
												<option value="1~20초">1~20초</option>
												<option value="21~40초">21~40초</option>
												<option value="41~60초">41~60초</option>
												<option value="61~80초">61~80초</option>
												<option value="81~300초">81~300초</option>
												<option value="301초 이상">301초</option>
											</select>
										</div>
										<div class="barChart-box">
											<div id="barChart1" class="chart"></div>
										</div>
									</div>
									<div class="grid-table-area">
										<div class="dx-grid-custom" id="gridTable1"></div>  
									</div>
								</div>
							</div>
						</div>
						<!--// 대기호 -->
						<!-- 라우트/큐 -->
						<div class="conts-area">
							<div class="conts-box">
								<div class="conTit-wrap">
									<div class="conTit">라우트/큐</div>
									<div class="btn-wrap">
										<button type="button" class="btn"><img src="resource/images/icon-setting.png"></button>
										<button type="button" class="btn"><img src="resource/images/icon-expand.png"></button>
									</div>
								</div>
									<div class="conts-box-inner">
									<div class="chart-area-multi">
										<div class="donutChart-box">
											<div id="donutChart2" class="chart"></div>
											<div class="center-text">
												<span class="label">응답률</span>
												<strong class="value">60.0<em>%</em></strong>
											</div>
										</div>
										<div class="donutChart-box">
											<div id="donutChart3" class="chart"></div>
											<div class="center-text">
												<span class="label">서비스 레벨</span>
												<strong class="value">47.0<em>%</em></strong>
											</div>
										</div>
									</div>
									<div class="grid-table-area">
										<div class="dx-grid-custom" id="gridTable2"></div>  
									</div>
								</div>
							
						</div>
						<!--// 라우트/큐 -->
					</div>
				</div>
      </div>
    </div> 
  </div>
 <script>
	const dougnutData = [
			{ category: '통화중', value: 850 },
			{ category: '휴식', value: 420 },
			{ category: '대기', value: 380 },
			{ category: '후처리', value: 280 },
			{ category: '로그아웃', value: 121 }
	];
	const dougnutData1 = [
			{ category: '응답', value: 850 },
			{ category: '무응답', value: 420 }
	];	
	const dougnutData2 = [
			{ category: '응답', value: 490 },
			{ category: '무응답', value:500 }
	];

	const lineChartData = [
		{ time: '8시', actual: 15, target: 50 },
		{ time: '9시', actual: 78, target: 60 },
		{ time: '10시', actual: 92, target: 70 },
		{ time: '11시', actual: 65, target: 80 },
		{ time: '12시', actual: 88, target: 75 },
		{ time: '13시', actual: 105, target: 85 },
		{ time: '14시', actual: 150, target: 90 },
		{ time: '15시', actual: 95, target: 95 },
		{ time: '16시', actual: 82, target: 100 },
		{ time: '17시', actual: 68, target: 90 }
];
	const barChartData = [
		{ category: '1~20초', value: 245},
		{ category: '21~40초', value: 300},
		{ category: '41~60초', value: 156},
		{ category: '61~80초', value: 147},
		{ category: '81~300초', value: 102},
		{ category: '301초 이상', value: 20}
];

	function createDonutChart(containerId, data, palette, showLegend = true, startAngle = 0) {
			const container = $(containerId);
			if (!container.length) return null;
			const chart = container.dxPieChart({
					dataSource: data,
					palette: palette,
					startAngle: startAngle,
					series: [{
							type: 'doughnut',
							argumentField: 'category',
							valueField: 'value',
							innerRadius: 0.65,
							label: {
									visible: false,
									position: 'inside',
									format: {
											type: 'fixedPoint',
											precision: 0
									},
									backgroundColor: "none",
									font: {
											size: 13,
											color: 'white',
											weight: 'bold'
									},
									connector: {
											visible: false
									}
							}
					}],
					legend: {
							visible: showLegend,
							horizontalAlignment: 'right',
							verticalAlignment: 'center',
							margin: {right:42},
							font: {
									size: 12
							},
							rowItemSpacing: 8,
							columnItemSpacing: 16
					},
					tooltip: {
							enabled: false
					},
					animation: {
							enabled: true,
							duration: 800,
							easing: 'easeInOutCubic'
					},
					// size: {
					//     width: undefined,
					//     height: undefined
					// },
					// margin: {
					//     // left: 10,
					//     // right: 10,
					//     // top: 10,
					//     // bottom: 40
					// },
					onDrawn: function(e) {
							requestAnimationFrame(function() {
									const chartInstance = e.component;
									const series = chartInstance.getAllSeries()[0];
									
									if (series) {
											const center = series.getVisibleArea();
											const centerX = (center.minX + center.maxX) / 2;
											const centerY = (center.minY + center.maxY) / 2;
											
											$(e.element).closest('.donutChart-box').find('.center-text').css({
													left: centerX + 'px',
													top: centerY + 'px'
											});
									}
							});
					}
			}).dxPieChart("instance");
			return chart;
	}
	createDonutChart('#donutChart1', dougnutData, ['#121212', '#444', '#666', '#999', '#d5d5d5'], true, 0);
	createDonutChart('#donutChart2', dougnutData1, ['#121212', '#E6E6E6'], false, 270);
	createDonutChart('#donutChart3', dougnutData2, ['#121212', '#E6E6E6'], false, 270);
	function createLineChart(containerId, data) {
			const container = $(containerId);
			if (!container.length) return null;

			const chart = container.dxChart({
					dataSource: data,
					palette: 'material',
					theme: 'material.blue.light',
					commonSeriesSettings: {
							type: 'spline',
							argumentField: 'time',
							point: {
									size: 8,
									hoverStyle: {
											size: 10
									},
									border: {
											visible: true,
											width: 2,
											color: '#fff'
									}
							},
							line: {
									width: 3
							}
					},
					series: [
							{
									valueField: 'actual',
									name: '응답률',
									color: '#222',
									point: {
											visible: true,
											symbol: 'circle',
											color: '#222'
									}
							},
							{
									valueField: 'target',
									name: '서비스 레벨',
									color: '#AAA',
									point: {
											visible: true,
											symbol: 'circle',
											color: '#AAA'
									}
							}
					],
					argumentAxis: {
							grid: {
									visible: true,
									color: '#E0E0E0',
									opacity: 0
							},
							label: {
									font: {
											size: 12,
											color: '#979797',
											family: 'Roboto, sans-serif'
									}
							},
							tick: {
									visible: false
							},
							line: {
									visible:false,
									color: '#333'
							}
					},
					valueAxis: {
							min: 0,
							// max: 160,
							tickInterval: 20,
							forceUserTickInterval: true,
							tick: {
									visible:false
							},
							grid: {
									visible: true,
									color: '#999',
									opacity: 0.2
							},
							label: {
									font: {
											size: 11,
											color: '#979797'
									},
									format: {
											type: 'fixedPoint',
											precision: 0
									}
							},
							line: {
									visible:false,
							}
					},
					legend: {
							visible: true,
							position: 'inside',
							orientation: 'horizontal',
							horizontalAlignment: 'right',
							verticalAlignment: 'top',
							itemsAlignment: 'center',
							columnCount: 2,
							rowItemSpacing: 0,
							columnItemSpacing: 20,
							// margin: { top: -30},
							font: {
									size: 12,
									color: '#979797',
									family: 'Roboto, sans-serif'
							}
					},
					tooltip: {
							enabled: true,
							shared: true,
							format: 'fixedPoint',
							precision: 0,
							shadow: {
									opacity: 0.2,
									offsetX: 0,
									offsetY: 2,
									blur: 8,
									color: '#000'
							},
							border: {
									visible: false
							},
							customizeTooltip: function(pointInfo) {
									return {
										text: pointInfo.argument + '<br/>' +
											pointInfo.points.map(function(point) {
													return '<span style="color:' + point.color + '">' +
																	point.seriesName + ': ' + point.value + '</span>';
											}).join('<br/>')
									};
							}
					},
					crosshair: {
							enabled: true,
							color: '#BDBDBD',
							width: 1,
							dashStyle: 'solid',
							label: {
									visible: false
							}
					},
					animation: {
							enabled: true,
							duration: 1200,
							easing: 'easeOutCubic'
					},
					size: {
							width: undefined,
							height: 280
					},
					// margin: {
					// 		// left: 20,``
					// 		// right: 20,
					// 		// top: 20,
					// 		// bottom: 60
					// }
			}).dxChart("instance");

			return chart;
	}
	createLineChart('#lineChart1', lineChartData);

	function createBarChart(containerId, data, palette) {
		const container = $(containerId);
		if (!container.length) return null;

		const chart = container.dxChart({
			dataSource: data,
			palette:palette,
			commonSeriesSettings: {
				type: 'bar',
				argumentField: 'category',
				valueField: 'value',
				ignoreEmptyPoints: true,
				barPadding: 0.5
			},
			seriesTemplate: {
					nameField: 'category'
			},
			argumentAxis: {
					grid: {
							visible: false
					},
					label: {
							font: {
									size: 12,
									color: '#979797',
									family: 'Roboto, sans-serif'
							}
					},
					tick: {
							visible: false
					},
					line: {
							visible: false
					}
			},
			valueAxis: {
					min: 0,
					tickInterval: 100,
					forceUserTickInterval: true,
					tick: {
							visible: false
					},
					grid: {
							visible: true,
							color: '#999',
							opacity: 0.2
					},
					label: {
						visible: false,
							// font: {
							// 		size: 11,
							// 		color: '#f00'
							// }
					},
					line: {
							visible: false
					}
			},
			legend: {
					visible: false
			},
			tooltip: {
					enabled: true,
					format: 'fixedPoint',
					precision: 0,
					customizeTooltip: function(pointInfo) {
							return {
									text: pointInfo.argumentText + ': ' + pointInfo.valueText + '건'
							};
					}
			},
			animation: {
					enabled: true,
					duration: 1000,
					easing: 'easeOutCubic'
			},
			// size: {
			// 		// width: undefined,
			// 		// height: 280
			// }
			}).dxChart("instance");

			return chart;
	}
	let currentBarChart = null;
	function updateBarChart(filter) {
			if (currentBarChart) {
					currentBarChart.dispose();
			}

			let filteredData = barChartData;
			if (filter !== 'all') {
					filteredData = barChartData.filter(item => item.category === filter);
			}

			currentBarChart = createBarChart('#barChart1', filteredData, ['#121212', '#333', '#555', '#777', '#999', '#CCC']);
	}
	updateBarChart('all');
	$('#chartFilterSelect').on('change', function() {
			const selectedFilter = $(this).val();
			updateBarChart(selectedFilter);
	});
</script>
<script>
	const gridData = [
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:0, t2:10, t3:10, t4:10, t5:10, t6:0}
];
	const gridColumns = {
		data1: [
			{
				dataField: 'id',
				caption: '테넌트',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 'qid',
				caption: '큐ID',
				width: '15%',
				alignment: 'center',
				format: {
					type: 'fixedPoint',
					precision: 0
				}
			},
			{
				dataField: 'qname',
				caption: '큐이름',
				width: '15%',
				alignment: 'center'
			},
			{
				dataField: 't1',
				caption: '1~20초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't2',
				caption: '21~40초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't3',
				caption: '41~60초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't4',
				caption: '61~80초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't5',
				caption: '81~300초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't6',
				caption: '300초 이상',
				width: '10%',
				alignment: 'right'
			}
		],
		data2: [
			{
				dataField: 'id',
				caption: '테넌트',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 'qid',
				caption: '큐ID',
				width: '15%',
				alignment: 'center'
			},
			{
				dataField: 'qname',
				caption: '큐이름',
				width: '15%',
				alignment: 'center'
			},
			{
				dataField: 'g1',
				caption: '대기호',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 'g2',
				caption: '총인입호',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 'g3',
				caption: '서비스레벨',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 'g4',
				caption: '분해홀',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 't5',
				caption: '81~300초',
				width: '10%',
				alignment: 'right'
			},
				{
				dataField: 't6',
				caption: '301초 이상',
				width: '10%',
				alignment: 'right'
			}
		]
	};

	function createDataGrid(containerId, data, columnsType) {
		const container = $(containerId);
		if (!container.length) return null;

		const grid = container.dxDataGrid({
			dataSource: data,
			keyExpr: 'id',
			showBorders: true,
			showRowLines: true,
			showColumnLines: true,
			columnAutoWidth: true,
			scrolling: {
				mode: "virtual"
			},
			paging: {
				enabled: false
			},
			columns: gridColumns[columnsType],
			headerFilter: {
				visible: false
			},
			filterRow: {
				visible: false
			},
			searchPanel: {
				visible: false
			},
			selection: {
				mode: 'single'
			},
			hoverStateEnabled: true
		}).dxDataGrid("instance");

		return grid;
	}

	createDataGrid('#gridTable1', gridData, 'data1');
	createDataGrid('#gridTable2', gridData, 'data2');
</script>
</body>
</html>