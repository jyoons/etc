<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="resource/css/common.css">
  <script src="resource/js/jquery-3.7.1.min.js"></script>
  <script src="resource/js/ui-common.js"></script>
	<link rel="stylesheet" type="text/css" href="resource/devEx/css/dx.light.css"/>
  <script type="text/javascript" src="resource/devEx/js/dx.all.js"></script>
	<!-- <script type="text/javascript" src="resource/js/plugins/jquery.awesomeCloud-0.2.js"></script> -->
	   <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-wordcloud@4/build/index.umd.min.js"></script>
</head>
<body>
  <div class="wrapper">
    <!-- header -->
    <header class="header">
      <div class="header-wrap">
        <div class="logo"><img src="resource/images/logo-2.png" alt="AICC 2.0"></div>
        <div class="info-area">
					<div style="display:flex; gap:14px;">
						<div class="switchLabel-wrap">
							  <span class="switchLabel_text">콜 대기</span>
								<label class="switchLabel">
									<input id="switch1" type="checkbox" class="switch" checked>
								</label>
						</div>
						<img src="resource/images/header-info1.png" alt="">
					</div>
					<div style="display:flex; align-items: center; gap:14px;">
							<div class="switchLabel-wrap">
								<span class="switchLabel_text">채팅대기</span>
								<label class="switchLabel">
									<input id="switch2" type="checkbox" class="switch" checked>
								</label>
							</div>
							<div class="switchLabel-wrap">
								<span class="switchLabel_text">게시판 대기</span>
								<label class="switchLabel">
									<input id="switch2" type="checkbox" class="switch">
								</label>
							</div>
							<div class="switchLabel-wrap">
								<span class="switchLabel_text">Q&A 대기</span>
								<label class="switchLabel">
									<input id="switch2" type="checkbox" class="switch"  checked>
								</label>
							</div>
					</div>
					<div><img src="resource/images/header-info2.png" alt=""></div>
					<div><img src="resource/images/header-info-02.png" alt=""></div>
        </div>
      </div>
			<div class="nav-wrap">
					<button type="button" class="btn nav-btn"><img src="resource/images/icon-menu.png" alt="메뉴"></button>
					<div class="nav-tabList-wrap">
						<div class="nav-tab-controller">
							<button type="button" class="btn nav-btn-prev"><img src="resource/images/icon-arrow-left.png" alt="이전"></button>
							<button type="button" class="btn nav-btn-next"><img src="resource/images/icon-arrow-right.png" alt="다음"></button>
							<button type="button" class="btn nav-btn-more"><img src="resource/images/icon-more.png" alt="더보기"></button>
						</div>
						<ul class="nav-tabList type-c1">
							<li class="active"><a href="javascript:void(0);" class="tab-nav-link">콜</a></li>
							<li><a href="javascript:void(0);" class="tab-nav-link">채팅</a></li>
							<li><a href="javascript:void(0);" class="tab-nav-link">상담통계</a></li>
							<li><a href="javascript:void(0);" class="tab-nav-link">업무이관리스트</a></li>
						</ul>
					</div>
			</div>
    </header>
    <!--// header --> 
    <div class="container">
      <div class="contents">
				<div class="contents-wrap">
					<div class="conts-area-wrap flexible-area" style="grid-template-rows: 0.8fr 10px 1.2fr;">
						<!-- grid left -->
						<div class="grid-row row-1">
							<div class="grid-area" style="flex:0 0 30%;">
								<div class="grid-conts" style="overflow:hidden;">
									<div class="conTit">고객 이슈 키워드 Cloude</div>
									<div class="grid-conts-inner" style="padding:5% 10%;">
										<div class="keyword-wrap">
        							<canvas class="keyword-area"></canvas>
      							</div>
									</div>
								</div>
								<div class="resize-h"></div>
							</div>
							<div class="grid-area"  style="flex:0 0 25%">
								<div class="grid-conts">
									<div class="conTit">상담사 상태</div>
									<div class="chart-wrap">
										<div class="donutChart-box">
											<div id="donutChart1" class="chart-area"></div>
											<div class="center-text">
													<span class="label">로그인</span>
													<strong class="value counter" data-target-num="230">0</strong>
											</div>
										</div>
									</div>
								</div>
								<div class="resize-h"></div>
							</div>
							<div class="grid-area">
								<div class="grid-conts">
									<div class="conTit">서비스 현황</div>
									<div class="chart-wrap">
										<div class="lineChart-box">
											<div id="lineChart1" class="chart"></div>
										</div>
									</div>
								</div>
								<div class="resize-h"></div>
							</div>
						</div>
						<!--// grid left -->
		  			<div class="grip-v" id="" aria-label="resize columns"></div>
						<!-- grid right -->
						<div class="grid-row row-2">
							<div class="grid-area">
								<div class="grid-conts">
									<div class="conTit">큐현황</div>
										<div class="data-list-wrap">
											<ul class="data-list-cards">
												<li class="data-list-card">
													<div class="dataTit">총인입호</div>
													<div class="conts counter" data-target-num="1415">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">실인입호</div>
													<div class="conts counter" data-target-num="21">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">분배호</div>
													<div class="conts counter"  data-target-num="65">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">포기호</div>
													<div class="conts counter" data-target-num="0">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">넌서비스호</div>
													<div class="conts counter" data-target-num="0">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">콜백</div>
													<div class="conts counter" data-target-num="21">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">큐전환</div>
													<div class="conts counter" data-target-num="0">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">실패호</div>
													<div class="conts counter" data-target-num="1">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">그룹호전환</div>
													<div class="conts counter" data-target-num="0">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">타센터 라우팅</div>
													<div class="conts counter" data-target-num="9">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">타센터 라우팅 실패</div>
													<div class="conts counter" data-target-num="21">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">타센터 인입</div>
													<div class="conts counter" data-target-num="7">0</div>
												</li>
											</ul>
										</div>
								</div>
								<div class="resize-h"></div>
							</div>
							<div class="grid-area">
								<div class="grid-conts">
									<div class="conTit">대기호</div>
									<div class="grid-conts-inner">							
										<div class="chart-area-multi">
											<div class="select-field"> 
												<select id="chartFilterSelect" class="select">
													<option value="all">전체</option>
													<option value="1~20초">1~20초</option>
													<option value="21~40초">21~40초</option>
													<option value="41~60초">41~60초</option>
													<option value="61~80초">61~80초</option>
													<option value="81~300초">81~300초</option>
													<option value="301초 이상">301초</option>
												</select>
											</div>
											<div class="barChart-box">
												<div id="barChart1" class="chart"></div>
											</div>
										</div>
										<div class="grid-table-area">
											<div class="dx-grid-custom" id="gridTable1"></div>  
										</div>
									</div>
								</div>
								<div class="resize-h"></div>
							</div>
							<div class="grid-area">
								<div class="grid-conts">
									<div class="conTit">대기호</div>
									<div class="grid-conts-inner">		
										<div class="chart-area-multi" style="padding:0 10%;">
											<div class="donutChart-box" style="height:130px;">
												<div id="donutChart2" class="chart"></div>
												<div class="center-text">
													<span class="label">응답률</span>
													<strong class="value counter" data-target-num="60.0" data-decimal="1">0<em>%</em></strong>
												</div>
											</div>
											<div class="donutChart-box" style="height:130px;">
												<div id="donutChart3" class="chart"></div>
												<div class="center-text">
													<span class="label">서비스 레벨</span>
													<strong class="value counter" data-target-num="47.0" data-decimal="1">0<em>%</em></strong>
												</div>
											</div>
										</div>
										<div class="data-list-wrap">
											<ul class="data-list-cards col-3">
												<li class="data-list-card">
													<div class="dataTit">인입호</div>
													<div class="conts counter" data-target-num="150">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">대기호</div>
													<div class="conts counter" data-target-num="3">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">응답호</div>
													<div class="conts counter"  data-target-num="125">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">포기호</div>
													<div class="conts counter" data-target-num="1">0</div>
												</li>
												<li class="data-list-card">
													<div class="dataTit">발신호</div>
													<div class="conts counter" data-target-num="28">0</div>
												</li>
											</ul>
										</div>
									</div>
								</div>
								<div class="resize-h"></div>
							</div>
						</div>
						<!--// grid right -->
					</div>
				</div>
      </div>
    </div> 
  </div>
<script>
(() => {
  const grip = document.querySelector('.grip-v');
  const box  = document.querySelector('.flexible-area');

  if (!grip || !box) return; // 요소가 없으면 종료

  let gripActive=false, startY=0, topH=0, bottomH=0, gripH=0;

  // 저장된 그리드 레이아웃 불러오기
  function loadGridLayout() {
    const savedLayout = localStorage.getItem('gridLayout');
    if (savedLayout) {
      const layout = JSON.parse(savedLayout);
      if (layout.gridTemplateRows) {
        box.style.gridTemplateRows = layout.gridTemplateRows;
      }
      // 가로 카드 크기 복원
      if (layout.cardSizes) {
        layout.cardSizes.forEach((size, index) => {
          const gridAreas = document.querySelectorAll('.grid-area');
          if (gridAreas[index] && size.width) {
            gridAreas[index].style.width = size.width;
            gridAreas[index].style.flex = 'none';
          }
          if (gridAreas[index] && size.height) {
            gridAreas[index].style.height = size.height;
            gridAreas[index].style.flex = 'none';
          }
        });
      }
    }
  }

  // 그리드 레이아웃 저장
  function saveGridLayout() {
    const cardSizes = [];
    document.querySelectorAll('.grid-area').forEach(area => {
      cardSizes.push({
        width: area.style.width,
        height: area.style.height
      });
    });

    const layout = {
      gridTemplateRows: box.style.gridTemplateRows,
      cardSizes: cardSizes
    };
    localStorage.setItem('gridLayout', JSON.stringify(layout));
  }

  function onGripDown(e){
    gripActive = true;
    startY = e.clientY;
    const row1 = document.querySelector('.grid-row.row-1');
    const row2 = document.querySelector('.grid-row.row-2');

    if (!row1 || !row2) return;

    const rect1 = row1.getBoundingClientRect();
    const rect2 = row2.getBoundingClientRect();
    gripH = grip.getBoundingClientRect().height || 12;

    topH = rect1.height;
    bottomH = rect2.height;

    document.body.classList.add('no-select');
    document.body.style.overflow = 'hidden';
    window.addEventListener('pointermove', onGripMove);
    window.addEventListener('pointerup', onGripUp);
  }
  function onGripMove(e){
    if(!gripActive) return;
    const dy = e.clientY - startY;

    const minRow = 100;
    const total = box.getBoundingClientRect().height - 36; // padding
    let newTop = Math.max(minRow, Math.min(topH + dy, total - gripH - minRow));
    let newBottom = total - gripH - newTop;

    box.style.gridTemplateRows = `${newTop}px ${gripH}px ${newBottom}px`;
  }
  function onGripUp(){
    gripActive = false;
    document.body.classList.remove('no-select');
    document.body.style.overflow = '';
    window.removeEventListener('pointermove', onGripMove);
    window.removeEventListener('pointerup', onGripUp);


    // 레이아웃 저장
    saveGridLayout();
  }

  // 레이아웃 리셋 함수
  function resetGridLayout() {
    localStorage.removeItem('gridLayout');
    // 기본 스타일로 리셋
    box.style.gridTemplateRows = '';
    document.querySelectorAll('.grid-area').forEach(area => {
      area.style.width = '';
      area.style.height = '';
      area.style.flex = '';
    });
    console.log('그리드 레이아웃이 기본값으로 리셋되었습니다.');
  }

  // 전역에서 접근 가능하도록 등록
  window.resetGridLayout = resetGridLayout;

  // 픽셀 값을 퍼센트로 변환하는 함수
  function convertPxToPercent() {
    document.querySelectorAll('.grid-area').forEach(area => {
      const parent = area.parentElement;
      if (!parent) return;

      // 가로 너비 처리
      if (area.style.width && area.style.width.includes('px')) {
        const widthPx = parseFloat(area.style.width);
        const parentWidth = parent.clientWidth;
        if (parentWidth > 0) {
          const widthPercent = (widthPx / parentWidth) * 100;
          area.style.width = Math.min(widthPercent, 100) + '%';
        }
      }

      // 세로 높이 처리
      if (area.style.height && area.style.height.includes('px')) {
        const heightPx = parseFloat(area.style.height);
        const parentHeight = parent.clientHeight;
        if (parentHeight > 0) {
          const heightPercent = (heightPx / parentHeight) * 100;
          area.style.height = Math.min(heightPercent, 100) + '%';
        }
      }
    });
  }

  // 페이지 로드 시 저장된 레이아웃 적용
  loadGridLayout();

  // 초기 픽셀→퍼센트 변환 (DOM 로드 후 약간의 지연)
  setTimeout(() => {
    convertPxToPercent();
  }, 100);

  if (grip) {
    grip.addEventListener('pointerdown', onGripDown);
  }

  /* ========= 세로 스플릿: 같은 열의 위/아래 카드가 서로 높이 주고받기 ========= */
  let activeTop=null, vStartY=0, startTopH=0, startBotH=0, colH=0;

  function onVDown(e){
    e.preventDefault();
    const topCard = e.currentTarget.closest('.grid-area');
    const col = topCard.parentElement;
    const botCard = topCard.nextElementSibling;
    if(!botCard || !botCard.classList.contains('grid-area')) return; // 마지막 카드면 무시

    activeTop = { topCard, botCard, col };
    vStartY    = e.clientY;
    startTopH  = topCard.offsetHeight;
    startBotH  = botCard.offsetHeight;
    colH       = col.clientHeight;

    document.body.classList.add('no-select');
    document.body.style.overflow = 'hidden';
    window.addEventListener('pointermove', onVMove);
    window.addEventListener('pointerup', onVUp);
  }

  function onVMove(e){
    if(!activeTop) return;
    const dy = e.clientY - vStartY;

    const minH = 100;
    // 위 카드 높이 조정(클램프): 아래 카드가 최소 높이 보장되도록
    const maxTop = colH - minH;
    const newTop = Math.max(minH, Math.min(startTopH + dy, maxTop));
    const newBot = colH - newTop;  // ✅ 합=열 높이 유지

    activeTop.topCard.style.height = newTop + 'px';
    activeTop.botCard.style.height = newBot + 'px';
    // 두 카드 모두 고정 높이로 전환 유지
    activeTop.topCard.style.flex = 'none';
    activeTop.botCard.style.flex = 'none';
  }

  function onVUp(){
    activeTop = null;
    document.body.classList.remove('no-select');
    document.body.style.overflow = '';
    window.removeEventListener('pointermove', onVMove);
    window.removeEventListener('pointerup', onVUp);

    // 레이아웃 저장
    saveGridLayout();
  }

  // 위/아래 경계 리사이저(=위 카드의 바)만 동작
  document.querySelectorAll('.grid-col .grid-area:not(:last-child) .resize-v')
    .forEach(h => h.addEventListener('pointerdown', onVDown));

  /* ========= 가로 스플릿: 같은 행의 좌/우 카드가 서로 너비 주고받기 ========= */
  let activeLeft=null, hStartX=0, startLeftW=0, startRightW=0, rowW=0;

  function onHDown(e){
    e.preventDefault();
    const leftCard = e.currentTarget.closest('.grid-area');
    const row = leftCard.parentElement;
    const rightCard = leftCard.nextElementSibling;
    if(!rightCard || !rightCard.classList.contains('grid-area')) return; // 마지막 카드면 무시

    activeLeft = { leftCard, rightCard, row };
    hStartX = e.clientX;
    startLeftW = leftCard.offsetWidth;
    startRightW = rightCard.offsetWidth;
    rowW = row.clientWidth;

    document.body.classList.add('no-select');
    document.body.style.overflow = 'hidden';
    window.addEventListener('pointermove', onHMove);
    window.addEventListener('pointerup', onHUp);
  }

  function onHMove(e){
    if(!activeLeft) return;
    const dx = e.clientX - hStartX;

    const minW = 80;

    // 현재 카드의 새로운 너비
    const newLeftW = Math.max(minW, startLeftW + dx);

    // 다음 카드의 새로운 너비 (변화량만큼 반대로 조정)
    const newRightW = Math.max(minW, startRightW - dx);

    // 최소 너비 제한으로 실제 적용할 너비 계산
    const actualLeftW = Math.min(newLeftW, startLeftW + startRightW - minW);
    const actualRightW = startLeftW + startRightW - actualLeftW;

    activeLeft.leftCard.style.width = actualLeftW + 'px';
    activeLeft.rightCard.style.width = actualRightW + 'px';
    activeLeft.leftCard.style.flex = 'none';
    activeLeft.rightCard.style.flex = 'none';
  }

  function onHUp(){
    activeLeft = null;
    document.body.classList.remove('no-select');
    document.body.style.overflow = '';
    window.removeEventListener('pointermove', onHMove);
    window.removeEventListener('pointerup', onHUp);

    // 레이아웃 저장
    saveGridLayout();
  }

  // 좌/우 경계 리사이저(=좌 카드의 바)만 동작
  document.querySelectorAll('.grid-row .grid-area:not(:last-child) .resize-h')
    .forEach(h => h.addEventListener('pointerdown', onHDown));

  /* (옵션) 창 크기 바뀌면 열 높이에 맞춰 두 카드 합을 보정 */
  window.addEventListener('resize', () => {
    // 공통 함수 사용
    convertPxToPercent();

    // 기존 높이 보정 로직
    const cols = ['.grid-row.row-1', '.grid-row.row-2'];
    cols.forEach(className => {
      const col = document.querySelector(className);
      if (!col) return;
      const cards = col.querySelectorAll('.grid-area');
      if(cards.length !== 2) return;
      const h0 = cards[0].offsetHeight, h1 = cards[1].offsetHeight;
      const sum = h0 + h1;
      const H   = col.clientHeight;
      if(sum === 0 || H === sum) return;
      // 비율 유지해서 리스케일
      const r0 = h0 / sum, r1 = h1 / sum;
      cards[0].style.height = (H * r0) + 'px';
      cards[1].style.height = (H * r1) + 'px';
      cards[0].style.flex = cards[1].style.flex = 'none';
    });
  });
})();
</script>
<script>
const keyword = {
  words: [
    { key: "워드클라우드", value: 10 },
    { key: "AI", value: 9 },
    { key: "텍스트", value: 8 },
    { key: "분석", value: 8 },
    { key: "자연어", value: 7 },
    { key: "딥러닝", value: 7 },
    { key: "데이터", value: 6 },
    { key: "검색", value: 6 },
    { key: "모델", value: 5 },
    { key: "NLP", value: 5 },
    { key: "시각화", value: 5 },
    { key: "정규화", value: 4 },
    { key: "감성", value: 4 },
    { key: "추천", value: 4 },
    { key: "전처리", value: 3 },
    { key: "라벨링", value: 3 },
    { key: "패턴", value: 3 },
    { key: "파이프라인", value: 2 },
    { key: "토큰화", value: 2 },
    { key: "형태소", value: 2 },
    { key: "불용어", value: 2 },
    { key: "어간추출", value: 2 },
    { key: "감정분석", value: 2 },
    { key: "군집화", value: 2 },
    { key: "분류모델", value: 2 },
    { key: "예측분석", value: 2 },
    { key: "추천시스템", value: 2 },
    { key: "머신러닝", value: 2 },
    { key: "클러스터링", value: 2 }
  ],
  config: {
    palette: ["#D1CAD9", "#A9BFE8", "#B58EC2", "rgba(128, 33, 171, 0.55)", "rgba(128, 33, 171, 0.60)", "#A19DE5", "#A9BFE8"],
    fontMultiplier: 8,
    maxFontSize: 20,
    minFontSize: 10,
    padding: 1
  },
  chart: null,
  init: function() {
    this.renderCloud();
  },
  renderCloud: function() {
    const canvas = document.querySelector('.keyword-area');
    const labels = this.words.map(d => d.key);
    const data = this.words.map(d => d.value * this.config.fontMultiplier);
    const colorFn = (ctx) => {
      if (!ctx || ctx.dataIndex === undefined) return this.config.palette[0];
      return this.config.palette[ctx.dataIndex % this.config.palette.length];
    };
		this.chart = new Chart(canvas.getContext("2d"), {
			type: 'wordCloud',
			data: {
				labels,
				datasets: [{
					label: '키워드',
					data,
					padding: 1,
					fit: true
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				layout: {
					padding: 5
				},
				elements: {
					word: {
						color: colorFn,
						rotate: () => 0,
						padding: this.config.padding,
						maxFontSize: this.config.maxFontSize,
						minFontSize: this.config.minFontSize
					}
				},
				plugins: { legend: { display: false } }
			}
		});
  }
};

keyword.init();
</script>
 <script>
	const dougnutData = [
			{ category: '통화중', value: 850 },
			{ category: '휴식', value: 420 },
			{ category: '대기', value: 380 },
			{ category: '후처리', value: 280 },
			{ category: '로그아웃', value: 121 }
	];
	const dougnutData1 = [
			{ category: '응답', value: 850 },
			{ category: '무응답', value: 420 }
	];	
	const dougnutData2 = [
			{ category: '응답', value: 490 },
			{ category: '무응답', value:500 }
	];

	const lineChartData = [
		{ time: '8시', actual: 15, target: 50 },
		{ time: '9시', actual: 78, target: 60 },
		{ time: '10시', actual: 92, target: 70 },
		{ time: '11시', actual: 65, target: 80 },
		{ time: '12시', actual: 88, target: 75 },
		{ time: '13시', actual: 105, target: 85 },
		{ time: '14시', actual: 150, target: 90 },
		{ time: '15시', actual: 95, target: 95 },
		{ time: '16시', actual: 82, target: 100 },
		{ time: '17시', actual: 68, target: 90 }
];
	const barChartData = [
		{ category: '1~20초', value: 245},
		{ category: '21~40초', value: 300},
		{ category: '41~60초', value: 156},
		{ category: '61~80초', value: 147},
		{ category: '81~300초', value: 102},
		{ category: '301초 이상', value: 20}
];

	function createDonutChart(containerId, data, palette, showLegend = true, startAngle = 0) {
			const container = $(containerId);
			if (!container.length) return null;
			const chart = container.dxPieChart({
					dataSource: data,
					palette: palette,
					startAngle: startAngle,
					series: [{
							type: 'doughnut',
							argumentField: 'category',
							valueField: 'value',
							innerRadius: 0.65,
							label: {
									visible: false,
									position: 'inside',
									format: {
											type: 'fixedPoint',
											precision: 0
									},
									backgroundColor: "none",
									font: {
											size: 13,
											color: 'white',
											weight: 'bold'
									},
									connector: {
											visible: false
									}
							}
					}],
					legend: {
							visible: showLegend,
							horizontalAlignment: 'right',
							verticalAlignment: 'center',
							margin: {right:42},
							font: {
									size: 12
							},
							rowItemSpacing: 8,
							columnItemSpacing: 16
					},
					tooltip: {
							enabled: false
					},
					animation: {
							enabled: true,
							duration: 800,
							easing: 'easeInOutCubic'
					},
					// size: {
					//     width: undefined,
					//     height: undefined
					// },
					// margin: {
					//     // left: 10,
					//     // right: 10,
					//     // top: 10,
					//     // bottom: 40
					// },
					onDrawn: function(e) {
							requestAnimationFrame(function() {
									const chartInstance = e.component;
									const series = chartInstance.getAllSeries()[0];
									
									if (series) {
											const center = series.getVisibleArea();
											const centerX = (center.minX + center.maxX) / 2;
											const centerY = (center.minY + center.maxY) / 2;
											 
											$(e.element).closest('.donutChart-box').find('.center-text').css({
													left: centerX + 'px',
													top: centerY + 'px'
											});
									}
							});
					}
			}).dxPieChart("instance");
			return chart;
	}
	createDonutChart('#donutChart1', dougnutData, ['#8A84DF', '#A19DE5', '#B9B5EC', '#D0CEF2', 'rgba(224, 224, 224, 0.60)'], true, 0);
	createDonutChart('#donutChart2', dougnutData1, ['#C294D7', '#E0E0E0'], false, 270);
	createDonutChart('#donutChart3', dougnutData2, ['#A19DE5', '#E0E0E0'], false, 270);
	function createLineChart(containerId, data) {
			const container = $(containerId);
			if (!container.length) return null;

			const chart = container.dxChart({
					dataSource: data,
					palette: 'material',
					theme: 'material.blue.light',
					commonSeriesSettings: {
							type: 'spline',
							argumentField: 'time',
							point: {
									size: 8,
									hoverStyle: {
											size: 10
									},
									border: {
											visible: true,
											width: 2,
											color: '#fff'
									}
							},
							line: {
									width: 3
							}
					},
					customizePoint: function(pointInfo) {
						if (pointInfo.seriesName === '응답률') {
								return { image: { url: 'resource/images/custom-symbol-1.png', width: 13, height: 13 }, visible: true };
						} else if (pointInfo.seriesName === '서비스 레벨') {
								return { image: { url: 'resource/images/custom-symbol-2.png', width: 13, height: 13 }, visible: true };
						}
						return null;
					},
					series: [
							{
									valueField: 'actual',
									name: '응답률',
									color: '#B98FCE',
									point: {
											visible: true,
											symbol: 'circle',
											color: '#B98FCE'
									}
							},
							{
									valueField: 'target',
									name: '서비스 레벨',
									color: '#8A84DF',
									point: {
											visible: true,
											symbol: 'circle',
											color: '#8A84DF'
									}
							}
					],
					argumentAxis: {
							grid: {
									visible: true,
									color: '#E0E0E0',
									opacity: 0
							},
							label: {
									font: {
											size: 12,
											color: '#979797',
											family: 'Roboto, sans-serif'
									}
							},
							tick: {
									visible: false
							},
							line: {
									visible:false,
									color: '#333'
							}
					},
					valueAxis: {
							min: 0,
							// max: 160,
							tickInterval: 20,
							forceUserTickInterval: true,
							tick: {
									visible:false
							},
							grid: {
									visible: true,
									color: '#999',
									opacity: 0.2
							},
							label: {
									font: {
											size: 11,
											color: '#979797'
									},
									format: {
											type: 'fixedPoint',
											precision: 0
									}
							},
							line: {
									visible:false,
							}
					},
					legend: {
							visible: true,
							position: 'outside',
							orientation: 'horizontal',
							horizontalAlignment: 'right',
							verticalAlignment: 'top',
							itemsAlignment: 'center',
							columnCount: 2,
							rowItemSpacing: 0,
							columnItemSpacing: 20,
							margin: { top: -30},
							font: {
									size: 12,
									color: '#979797',
									family: 'Roboto, sans-serif'
							}
					},
					tooltip: {
							enabled: true,
							shared: true,
							format: 'fixedPoint',
							precision: 0,
							shadow: {
									opacity: 0.2,
									offsetX: 0,
									offsetY: 2,
									blur: 8,
									color: '#000'
							},
							border: {
									visible: false
							},
							customizeTooltip: function(pointInfo) {
									return {
										text: pointInfo.argument + '<br/>' +
											pointInfo.points.map(function(point) {
													return '<span style="color:' + point.color + '">' +
																	point.seriesName + ': ' + point.value + '</span>';
											}).join('<br/>')
									};
							}
					},
					crosshair: {
							enabled: true,
							color: '#BDBDBD',
							width: 1,
							dashStyle: 'solid',
							label: {
									visible: false
							}
					},
					animation: {
							enabled: true,
							duration: 1200,
							easing: 'easeOutCubic'
					},
					size: {
							// width: undefined,
							// height: 280
					},
					// margin: {
					// 		// left: 20,``
					// 		// right: 20,
					// 		// top: 20,
					// 		// bottom: 60
					// }
			}).dxChart("instance");

			return chart;
	}
	createLineChart('#lineChart1', lineChartData);

	function createBarChart(containerId, data, palette) {
		const container = $(containerId);
		if (!container.length) return null;

		const chart = container.dxChart({
			dataSource: data,
			palette:palette,
			commonSeriesSettings: {
				type: 'bar',
				argumentField: 'category',
				valueField: 'value',
				ignoreEmptyPoints: true,
				barPadding: 0.5
			},
			seriesTemplate: {
					nameField: 'category'
			},
			argumentAxis: {
					grid: {
							visible: false
					},
					label: {
							font: {
									size: 12,
									color: '#979797',
									family: 'Roboto, sans-serif'
							}
					},
					tick: {
							visible: false
					},
					line: {
							visible: false
					}
			},
			valueAxis: {
					min: 0,
					tickInterval: 100,
					forceUserTickInterval: true,
					tick: {
							visible: false
					},
					grid: {
							visible: true,
							color: '#999',
							opacity: 0.2
					},
					label: {
						visible: false,
							// font: {
							// 		size: 11,
							// 		color: '#f00'
							// }
					},
					line: {
							visible: false
					}
			},
			legend: {
					visible: false
			},
			tooltip: {
					enabled: true,
					format: 'fixedPoint',
					precision: 0,
					customizeTooltip: function(pointInfo) {
							return {
									text: pointInfo.argumentText + ': ' + pointInfo.valueText + '건'
							};
					}
			},
			animation: {
					enabled: true,
					duration: 1000,
					easing: 'easeOutCubic'
			},
			// size: {
			// 		// width: undefined,
			// 		// height: 280
			// }
			}).dxChart("instance");

			return chart;
	}
	let currentBarChart = null;
	function updateBarChart(filter) {
			if (currentBarChart) {
					currentBarChart.dispose();
			}

			let filteredData = barChartData;
			if (filter !== 'all') {
					filteredData = barChartData.filter(item => item.category === filter);
			}

			currentBarChart = createBarChart('#barChart1', filteredData, ['rgba(143, 138, 208, 1)', 'rgba(143, 138, 208, 0.9)', 'rgba(143, 138, 208, 0.8)', 'rgba(143, 138, 208, 0.7)', 'rgba(143, 138, 208, 0.6)', 'rgba(143, 138, 208, 0.5)']);
	}
	updateBarChart('all');
	$('#chartFilterSelect').on('change', function() {
			const selectedFilter = $(this).val();
			updateBarChart(selectedFilter);
	});
</script>
<script>
	const gridData = [
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:10, t2:10, t3:10, t4:10, t5:10, t6:0},
		{id : 'SKT23121-last',  qid : 'VC111110000', qname : '기타문의', g1:0, g2:0, g3:0, g4:0, t1:0, t2:10, t3:10, t4:10, t5:10, t6:0}
];
	const gridColumns = {
		data1: [
			{
				dataField: 'id',
				caption: '테넌트',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 'qid',
				caption: '큐ID',
				width: '15%',
				alignment: 'center',
				format: {
					type: 'fixedPoint',
					precision: 0
				}
			},
			{
				dataField: 'qname',
				caption: '큐이름',
				width: '15%',
				alignment: 'center'
			},
			{
				dataField: 't1',
				caption: '1~20초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't2',
				caption: '21~40초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't3',
				caption: '41~60초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't4',
				caption: '61~80초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't5',
				caption: '81~300초',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 't6',
				caption: '300초 이상',
				width: '10%',
				alignment: 'right'
			}
		],
		data2: [
			{
				dataField: 'id',
				caption: '테넌트',
				width: '10%',
				alignment: 'center'
			},
			{
				dataField: 'qid',
				caption: '큐ID',
				width: '15%',
				alignment: 'center'
			},
			{
				dataField: 'qname',
				caption: '큐이름',
				width: '15%',
				alignment: 'center'
			},
			{
				dataField: 'g1',
				caption: '대기호',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 'g2',
				caption: '총인입호',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 'g3',
				caption: '서비스레벨',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 'g4',
				caption: '분해홀',
				width: '10%',
				alignment: 'right'
			},
			{
				dataField: 't5',
				caption: '81~300초',
				width: '10%',
				alignment: 'right'
			},
				{
				dataField: 't6',
				caption: '301초 이상',
				width: '10%',
				alignment: 'right'
			}
		]
	};

	function createDataGrid(containerId, data, columnsType) {
		const container = $(containerId);
		if (!container.length) return null;

		const grid = container.dxDataGrid({
			dataSource: data,
			keyExpr: 'id',
			showBorders: true,
			showRowLines: true,
			showColumnLines: true,
			columnAutoWidth: true,
			scrolling: {
				mode: "virtual"
			},
			paging: {
				enabled: false
			},
			columns: gridColumns[columnsType],
			headerFilter: {
				visible: false
			},
			filterRow: {
				visible: false
			},
			searchPanel: {
				visible: false
			},
			selection: {
				mode: 'single'
			},
			hoverStateEnabled: true
		}).dxDataGrid("instance");

		return grid;
	}

	createDataGrid('#gridTable1', gridData, 'data1');
	//createDataGrid('#gridTable2', gridData, 'data2');
</script>
</body>
</html> 